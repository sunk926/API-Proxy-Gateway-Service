# API 代理网关服务环境变量配置示例
# 复制此文件为 .env 并根据需要修改配置

# ==================== 基础配置 ====================

# 服务端口
PORT=3000

# 运行环境 (development | production | test)
NODE_ENV=development

# 日志级别 (debug | info | warn | error)
LOG_LEVEL=info

# ==================== 负载均衡配置 ====================

# 负载均衡策略 (round_robin | random | least_connections)
LOAD_BALANCE_STRATEGY=round_robin

# ==================== 熔断器配置 ====================

# 失败阈值（连续失败多少次后触发熔断）
CIRCUIT_BREAKER_FAILURE_THRESHOLD=3

# 熔断器重置超时时间（毫秒）
CIRCUIT_BREAKER_RESET_TIMEOUT=60000

# 熔断器监控周期（毫秒）
CIRCUIT_BREAKER_MONITORING_PERIOD=300000

# ==================== Gemini API 配置 ====================

# Gemini API 基础 URL
GEMINI_BASE_URL=https://generativelanguage.googleapis.com

# Gemini API 版本
GEMINI_API_VERSION=v1beta

# Gemini API 请求超时时间（毫秒）
GEMINI_TIMEOUT=30000

# Gemini API 重试次数
GEMINI_RETRY_COUNT=2

# Gemini API 重试延迟（毫秒）
GEMINI_RETRY_DELAY=1000

# ==================== CORS 配置 ====================

# 允许的源（* 表示允许所有源，或使用逗号分隔的域名列表）
CORS_ORIGIN=*

# 是否允许携带凭据
CORS_CREDENTIALS=false

# ==================== 速率限制配置 ====================

# 是否启用速率限制
RATE_LIMIT_ENABLED=false

# 速率限制时间窗口（毫秒）
RATE_LIMIT_WINDOW_MS=60000

# 时间窗口内最大请求数
RATE_LIMIT_MAX_REQUESTS=100

# 速率限制提示消息
RATE_LIMIT_MESSAGE=请求过于频繁，请稍后再试

# ==================== 安全配置 ====================

# 是否启用 Helmet 安全头
HELMET_ENABLED=true

# 是否启用请求体大小限制
BODY_LIMIT_ENABLED=true

# 请求体大小限制
BODY_LIMIT=10mb

# 是否启用 API Key 验证
API_KEY_VALIDATION_ENABLED=true

# ==================== 监控配置 ====================

# 是否启用性能监控
MONITORING_ENABLED=true

# 统计数据保留时间（毫秒）
STATS_RETENTION_TIME=3600000

# 健康检查端点路径
HEALTH_CHECK_PATH=/health

# 统计端点路径
STATS_PATH=/stats

# ==================== 示例 API Keys ====================
# 注意：这些是示例，请替换为您的真实 API Keys
# 可以使用逗号分隔多个 API Key

# Google Gemini API Keys (示例格式)
# GEMINI_API_KEYS=AIzaSyABC123...,AIzaSyDEF456...,AIzaSyGHI789...

# ==================== 部署相关配置 ====================

# Vercel 部署配置
# VERCEL_URL=your-app.vercel.app

# Cloudflare Workers 配置
# CF_ACCOUNT_ID=your-account-id
# CF_ZONE_ID=your-zone-id

# ==================== 开发配置 ====================

# 开发模式下的额外配置
# DEV_ENABLE_MOCK=false
# DEV_MOCK_DELAY=1000

# ==================== 生产配置建议 ====================

# 生产环境建议配置：
# NODE_ENV=production
# LOG_LEVEL=warn
# HELMET_ENABLED=true
# RATE_LIMIT_ENABLED=true
# MONITORING_ENABLED=true
# CORS_ORIGIN=https://yourdomain.com

# ==================== 安全提示 ====================

# 1. 请勿将真实的 API Key 提交到版本控制系统
# 2. 在生产环境中使用环境变量或密钥管理服务
# 3. 定期轮换 API Key
# 4. 监控 API Key 的使用情况
# 5. 设置适当的 CORS 策略
# 6. 启用速率限制以防止滥用
# 7. 使用 HTTPS 传输敏感数据
